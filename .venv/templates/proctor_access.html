<!DOCTYPE html>
<html>
<head>
    <title>Proctor Access</title>
</head>
<body>
    <form action="/proctor_access" method="post">
        Serial Number: <input type="text" name="afpsn" id="afpsn"><br>
        <div id="usernameDisplay"></div><br>
        <button type="button" onclick="searchafpsn()">Search</button><br><br>
        
        <!-- Push-up data -->
        Pushup Count: <input type="text" name="raw_pushup" id="raw_pushup" disabled><br>
        
        <!-- Sit-up data -->
        Situp Count: <input type="text" name="raw_situp" id="raw_situp" disabled><br>
        
        <!-- Date -->
        Date (YYYY-MM-DD): <input type="text" name="act_date" id="act_date" disabled><br><br>
        
        <input type="submit" value="Submit" id="submitButton" disabled>
    </form>

    <script>
        function searchafpsn() {
            var afpsn = document.getElementById("afpsn").value;

            var xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {
                    document.getElementById("usernameDisplay").innerHTML = this.responseText;

                    if (this.responseText.trim().length > 0) {
                        document.getElementById("raw_pushup").disabled = false;
                        document.getElementById("raw_situp").disabled = false;
                        document.getElementById("act_date").disabled = false;
                        document.getElementById("submitButton").disabled = false;
                    } else {
                        document.getElementById("raw_pushup").value = "";
                        document.getElementById("raw_situp").value = "";
                        document.getElementById("act_date").value = "";
                        document.getElementById("raw_pushup").disabled = true;
                        document.getElementById("raw_situp").disabled = true;
                        document.getElementById("act_date").disabled = true;
                        document.getElementById("submitButton").disabled = true;
                    }
                }
            };
            xhttp.open("GET", "/search_serial?afpsn=" + afpsn, true);
            xhttp.send();
        }
    </script>
</body>
</html>